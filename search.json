[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Modelling of Tranport Systems",
    "section": "",
    "text": "This website makes available materials, data and tutorials to use at the Modelling of Transport Systems course of the Master in Transportation Systems at Instituto Superior T√©cnico - University of Lisbon.\n \nSee the Micro modelling home assignment.\n\n\n\n\n\n\nThis website is under construction\n\n\n\nIf you have any suggestions, please contact the course teacher."
  },
  {
    "objectID": "accessibility.html",
    "href": "accessibility.html",
    "title": "Acessibility",
    "section": "",
    "text": "Isochrones\n\n\nAccessibility",
    "crumbs": [
      "Home",
      "Exercises",
      "Acessibility"
    ]
  },
  {
    "objectID": "visum.html",
    "href": "visum.html",
    "title": "Visum",
    "section": "",
    "text": "This tutorial is only for Windows\n\n\n\nIf you do not use Windows, you need to have a Virtual Machine. If you have an Arm processor this won‚Äôt work, even with a VM.\nIn this tutorial we will guide you to install and start using Visum.\nPTV Visum is a macro simulation software, non-free, available only for Windows OS.",
    "crumbs": [
      "Home",
      "Software",
      "VISUM"
    ]
  },
  {
    "objectID": "visum.html#installation",
    "href": "visum.html#installation",
    "title": "Visum",
    "section": "Installation",
    "text": "Installation\nPTV Visum is available to download at: https://cgi.ptvgroup.com/visionSetups/en/filter;product=PTV%20Visum\nChoose the most recent version (recommended) ‚â§ 2024. The file may be more than 1.3 GB.\nIf you don‚Äôt have Python installed already in your PC, don‚Äôt worry, you can opt to install it along the Visum setup.\nThe available instructions are very straight forward.\n\nLicence activation\n\nYou should have received a server address of where the CERIS licence lives. If not, contact the course teacher.\n\nTo use Visum with the CERIS licence, you need to download PTV Licence Manager (Standard).\n\nIt will ask you to download also another tiny software CodeMeter Runtime. Say yes!\nAfter install it, open PTV Licence Manager, and click on ‚öôÔ∏è Edit CodeMeter settings:\n\nAdd ‚ûï CodeMeter server, and insert the server address that was sent to you.\n\nPress close (go back) and now üîç Find Licences.\n\nAn available licence row should now appear on the list üéâ. Close it.\n\n\n\n\n\n\nFor any reason üßô‚Äç‚ôÇÔ∏è the licence is not accessed if you are connected to the IST DECivil ethernet network.",
    "crumbs": [
      "Home",
      "Software",
      "VISUM"
    ]
  },
  {
    "objectID": "visum.html#getting-started",
    "href": "visum.html#getting-started",
    "title": "Visum",
    "section": "Getting started",
    "text": "Getting started\nWhen launching Visum for the first time, you should have something like this. This is a good signal, it means that the connection to the licence server is running smoothly and that you are ready to start working on your projects! üöÄ\n\nThe ‚ÄúTutorial First Steps‚Äù may be wise to follow if you are not familiar with the software. It covers the following topics:\n\nNetwork editing (private and public transport)\nProcedure sequence\nGraphic parameters\n\nPTV also offers online tutorials to get familiar with the software.",
    "crumbs": [
      "Home",
      "Software",
      "VISUM"
    ]
  },
  {
    "objectID": "sumo.html",
    "href": "sumo.html",
    "title": "SUMO",
    "section": "",
    "text": "In this tutorial we will guide you to install and start using SUMO.\nSUMO is a free and open source traffic simulation suite. It is available since 2001 and allows modelling of intermodal traffic systems - including road vehicles, public transport and pedestrians. Included with SUMO is a wealth of supporting tools which automate core tasks for the creation, the execution and evaluation of traffic simulations, such as network import, route calculations, visualization and emission calculation (Lopez et al. 2018).\nSUMO is available for any operating system.",
    "crumbs": [
      "Home",
      "Software",
      "SUMO"
    ]
  },
  {
    "objectID": "sumo.html#installation",
    "href": "sumo.html#installation",
    "title": "SUMO",
    "section": "Installation",
    "text": "Installation\n\nWindows\nThe installation of SUMO in Windows is pretty straightforward.\nVisit https://eclipse.dev/sumo/ and download the installation file (137 MB).\n\nOpen the downloaded file and execute in your computer. Accept the defaults and install.\n\n\nMac OS\n\nsoon. üêº\n\n\n\nLinux\nIn debian based (ubuntu, kubuntu, popOS, debian) follow this instructions.\n\nsoon. üêß",
    "crumbs": [
      "Home",
      "Software",
      "SUMO"
    ]
  },
  {
    "objectID": "sumo.html#getting-started",
    "href": "sumo.html#getting-started",
    "title": "SUMO",
    "section": "Getting started",
    "text": "Getting started\nOpen SUMO-gui (Graphic User Interface). You should have a window like this:\n\nSeveral tutorials are available. Try these ones:\n\nHello World - Creating a simple network and demand scenario with netedit and visualizing it using sumo-gui\nOSMWebWizard - Setting up a scenario with just a few clicks using osmWebWizard.py; getting a network from OpenStreetMap\nQuick Start - A more complex tutorial with netedit; first steps in SUMO\nDriving in Circles - Work with netedit; define a flow; let vehicles drive in circles using rerouters\nSUMOlympics - Create special lanes and simple traffic lights in netedit, more about flows and vehicle types, working with vehicle\nAutobahn - Build a highway, create a mixed highway flow, visualize vehicle speed, save view settings\nImporting GTFS - Importing public transport schedules from public sources using the General Transit Feed Specification\n\n\n\nImport from OpenStreetMap\nThis requires having Python installed.\n\nWindows: Start -&gt; All Programs -&gt; OSM Web Wizard\nMacOS: üêº\nLinux (terminal):\n\ncd ~/sumo/tools\npython3 osmWebWizard.py\nAnd a window will open in your browser.\n\nYou may zoom and pan to the area of your interest1. Click on ‚ÄúSelect Area‚Äù and draw a rectangle with your mouse for which you wish to generate the simulation scenario.\n\nNetwork Generation\nThe infrastructure import from OSM into the SUMO simulation are affected by different Wizard options\n\nby default the ‚ÄúAdd Polygon‚Äù checkbox is checked and a road traffic simulation is generated but all types of roads and rails will be imported as well (cycle paths, footpaths, railways etc)\nif the checkbox ‚Äúleft-hand Traffic‚Äù is enabled, the network will be built with left hand traffic rules. For most geographic regions where this is required, this feature will be enabled automatically but if it does not work, this option can be used as a remedy.\nif the checkbox ‚ÄúCar-only Network‚Äù is enabled, then only roads that permit passenger car traffic will be included. This can be used to reduce the network size and also helps to reduce intersection complexity\nif the checkbox ‚ÄúImport Public Transport‚Äù is enabled, then busStops and trainStops will be exported. Also busses, trams and trains will be generated that follow the public transport routes defined in OSM (but they will follow synthetic schedules).\nif the Demand-checkbox ‚ÄúBicycles‚Äù is active, then extra bicycle lanes will be added to roads where OSM contains this information\nif the Demand-checkbox ‚ÄúPedestrians‚Äù is active, then sidewalks and pedestrian crossings will be generated\n\n\n\nDemand Generation\nThe demand is defined by the demand generation panel. You activate this panel by clicking on the car pictogram.\n\nSUMO supports various modes of transport. At the demand generation panel, you can activate/deactivate the individual modes of transport by clicking the corresponding checkboxes. For each mode of transport, the OSM Web Wizard generates random demand based on a certain probability distribution, which is influenced by two parameters:\n\nEvery time a new vehicle is generated, the OSM Web Wizard randomly chooses a departure and arrival edge for the vehicle. The Through Traffic Factor defines how many times it is more likely for an edge at the boundary of the simulation area being chosen, compared to an edge entirely located inside the simulation area. A big value for the Through Traffic Factor implies that many vehicles depart and arrive at the boundary of the simulation area, which corresponds to a scenario with a lot of through traffic.\nThe Count parameter defines how many vehicles are generated per hour and lane-kilometer. Assuming\n\nthe network contains 3 edges with a combined length of 5 km\nthat each has 2 lanes which allows the current traffic mode\nand the count value is set to 90,\nthen 5 * 2 * 90 = 900 vehicles per hour will be generated.\n\n\nThis translates to a randomTrips parameter of p=4 which means a new vehicle is inserted every 4 seconds somewhere in the network.\nThe next step is generating and running the scenario.\n\n\nRoad-Type Selection\nIn the Road-Type tab of the OSM Web Wizard one can define which road types to be downloaded and rendered.\n\nFor example, one can only choose motorways, primary, secondary and tertiary to simulate major traffic. This impacts the file size of the OSM map data.\nBy default, all road types are checked which implies downloading and rendering all roads.\nUnchecking the ‚ÄúAdd Polygon‚Äù checkbox in the Demand Generation section disables downloading and rendering non-road objects like buildings, waterways, etc. resulting in a smaller file size.\n\n\nGenerating and Running the scenario\nThe complete scenario will be generated automatically once Generate Scenario in the control panel has been clicked. The scenario generation takes a couple of seconds or minutes (depending, among other factors, on the size of the scenario).\nOnce the scenario generation process has finished, the sumo-gui starts and the simulation can be started by pressing the Play button.\n You will see agents making their trips. Adjust the Delay to make it faster or slower.\n\nA new directory under your user folder ~/SUMO/yyyy-mm-dd-hh-mm-ss will be created to host the data and results. You may now edit those files and re-run the simulation (open run file).\n\n\n\nUse the case study data\n\nSoon ü•Ω",
    "crumbs": [
      "Home",
      "Software",
      "SUMO"
    ]
  },
  {
    "objectID": "sumo.html#footnotes",
    "href": "sumo.html#footnotes",
    "title": "SUMO",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nCaution: if the map excerpt covers a very large area, the simulation might become slow or even unresponsive. We suggest choosing a similar zoom level as in the initial view.‚Ü©Ô∏é",
    "crumbs": [
      "Home",
      "Software",
      "SUMO"
    ]
  },
  {
    "objectID": "scenarios.html#with-and-without-a-metro-station-or-metro-line",
    "href": "scenarios.html#with-and-without-a-metro-station-or-metro-line",
    "title": "Scenarios",
    "section": "With and without a metro station or metro line",
    "text": "With and without a metro station or metro line\nLet‚Äôs create a new metro line or a new station in your city.\n\n\n\nNew pink line (expansion in Lisbon)\n\n\n\nMethodology\nFor that, an easy graphic interface software is the PTV Lines.\n\nLogin into PTV Lines (upper right corner) with the credentials that were sent to you.\nCreate a new scenario, and import an existing subway gtfs (.zip) - max 60 lines!\nEdit that scenario by creating stops and lines.\nExport the GTFS file.\nDuplicate your r5r folder (baseline scenario) and delete the network.dat file inside. Rename it as ..._sen1 and replace the gtfs.zip by the one you just exported.\nBuild a new network with that folder path.\n\n\n\nCreate a metro line with PTV Lines\nFirst, create new station points (S) and name them. As many as you need.\n\n\n\n\n\n\n\n\n\n\nThen, create a new line (L), name it something like ‚ÄúExpansion‚Äù, and create a new route (R). Name it 0 (you can edit later) and draw that line roughly by selecting an existing start station and connecting to your new stations.\n\n\n\n\n\nAdd trips to it (T), with a proper headway.\n\n\n\n\n\nAfter defining the weekday and weekend trips, go to the Outbound route and ‚ÄúCreate opposite direction‚Äù, so you can have both directions now. Rename the line routes, something as ‚ÄúStart station - End station‚Äù.\n\n\n\n\n\nGo to Connections, and click on a connecting station to visualize the time diagram of connections with other routes.\n\n\n\n\n\nAfter all your edits, go back to the dashboard, and click on ‚ÄúExport supply‚Äù. Export as GTFS (.zip)\n\nYour scenario will be saved in your dashboard. You can edit or duplicate them later.\n\n\n\n\n\n\nYour task\n\n\n\nRun some routing and accessibility analysis, and compare with the baseline scenario.\n\n\nIf you do multi-modal analysis, you may need to use GTFShift::unify() to merge the new gtfs with other modes and create new transfers.",
    "crumbs": [
      "Home",
      "Exercises",
      "Scenarios"
    ]
  },
  {
    "objectID": "routing.html#uni-modal",
    "href": "routing.html#uni-modal",
    "title": "Routing",
    "section": "Uni-modal",
    "text": "Uni-modal",
    "crumbs": [
      "Home",
      "Exercises",
      "Routing"
    ]
  },
  {
    "objectID": "routing.html#multi-modal",
    "href": "routing.html#multi-modal",
    "title": "Routing",
    "section": "Multi-modal",
    "text": "Multi-modal\n\nEgress mode",
    "crumbs": [
      "Home",
      "Exercises",
      "Routing"
    ]
  },
  {
    "objectID": "routing.html#pareto-frontier",
    "href": "routing.html#pareto-frontier",
    "title": "Routing",
    "section": "Pareto frontier",
    "text": "Pareto frontier\n\nCreate rules for an operator\nCreate fare_rules.txt and fare_attributes.txt for Carris based on Metropolitano Lisboa.",
    "crumbs": [
      "Home",
      "Exercises",
      "Routing"
    ]
  },
  {
    "objectID": "network.html",
    "href": "network.html",
    "title": "r5r network setup",
    "section": "",
    "text": "In this chapter we will guide you through the data requirements, data collection, and setting up a multi-modal network with r5r.",
    "crumbs": [
      "Home",
      "Exercises",
      "r5r network setup"
    ]
  },
  {
    "objectID": "network.html#data-requirements",
    "href": "network.html#data-requirements",
    "title": "r5r network setup",
    "section": "Data requirements",
    "text": "Data requirements\nYou will need R and r5r (Pereira et al. 2021) package installed on your computer.\nr5r sets-up a network file .dat by combining the following datasets in the same folder:\n\nRoad Network (OpenStreetMap1 as .osm.pbf)\nGTFS2 from PTransit operators (a single .zip or several)\nDigital Elevation Model3 (.tiff), to consider impedances for walking and cycling\n\n\n\n\n\n\n\nNote\n\n\n\nVer o c√≥digo code/r5r.R\n\n\nFor the documentation of data needed, see r5r::build_network",
    "crumbs": [
      "Home",
      "Exercises",
      "r5r network setup"
    ]
  },
  {
    "objectID": "network.html#data-collection",
    "href": "network.html#data-collection",
    "title": "r5r network setup",
    "section": "Data collection",
    "text": "Data collection",
    "crumbs": [
      "Home",
      "Exercises",
      "r5r network setup"
    ]
  },
  {
    "objectID": "network.html#setting-up-a-routable-transport-network",
    "href": "network.html#setting-up-a-routable-transport-network",
    "title": "r5r network setup",
    "section": "Setting up a routable transport network",
    "text": "Setting up a routable transport network\n\n# Load packages\nlibrary(tidyverse)\nlibrary(sf)\noptions(java.parameters = '-Xmx8G') # allocate memory for 8GB \nlibrary(r5r)\n\n\ndata_path= \"data/r5r\" # relative path to your folder containing the required data\nnetwork = build_network(\n  data_path,\n  elevation = \"TOBLER\" # optional. MINETTI or NONE\n)\n\n\n\n\n\n\n\nIf you already have a network.dat file, it will use that pre-build network.",
    "crumbs": [
      "Home",
      "Exercises",
      "r5r network setup"
    ]
  },
  {
    "objectID": "network.html#footnotes",
    "href": "network.html#footnotes",
    "title": "r5r network setup",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSee how to export an area with HOT export tool.‚Ü©Ô∏é\nOptional.‚Ü©Ô∏é\nOptional.‚Ü©Ô∏é",
    "crumbs": [
      "Home",
      "Exercises",
      "r5r network setup"
    ]
  },
  {
    "objectID": "micro.html",
    "href": "micro.html",
    "title": "Micro Case Study",
    "section": "",
    "text": "You may use an intersection file already prepared to be used with VISSIM, like this one:\nThis file is available at Fenix, for registered students.\nHow did this file was converted from OpenStreetMap? üßê",
    "crumbs": [
      "Home",
      "Exercises",
      "Micro Case Study"
    ]
  },
  {
    "objectID": "micro.html#from-openstreetmap-to-vissim",
    "href": "micro.html#from-openstreetmap-to-vissim",
    "title": "Micro Case Study",
    "section": "From OpenStreetMap to VISSIM",
    "text": "From OpenStreetMap to VISSIM\n\nRequirements\nThis will require:\n\nVISSIM installed with an active license\nPython 3.x, and the following packages\n\nwin32com\ngdal\n\nMicrosoft Visual C++ build tools\nOptional: OSGeo4W1\n\n\n\nOpenStreetMap\nGo to OpenStreetMap and zoom into your area.\nSelect Export and save the map.osm file.\n\nYou don‚Äôt need to open that file now.\n\n\nOSM2VISSIM tool\n\nGo to the OSM2VISSIM tool Github page, and download this OSM2VISSIM_v0.1.py file.\n\n\n\nCreate a folder (wherever you want) and put there this .py file and the .osm file exported before. Now copy your folder path!\n\n\n\nIf you have OSGeo4W installed2, open the shell. It will look like this:\n\n\n\nNavigate to your created folder, using cd yourfolderpath\nNow, run python OSM2VISSIM_v0.1.py\n\n\n\nThis will open a dialogue window where you are supposed to type your .osm file name.\nMine is gago\n\n\n\nPress Set.\n\n\n\n\n\n\n\nDon‚Äôt worry! Things are happening even if you don‚Äôt notice. Just be patient and wait.\n\n\n\nThis will create a new file, and open VISSIM automatically.\nNote: If you go to the Network tab and don‚Äôt see anything, even after clicking on zoom to network button, close VISSIM, and close the Shell. This happened to me every first time.\n\nRepeat again the steps from 1 to 7.\n\nThis will open VISSIM automatically and now the shell will show things happening:\n\nWait until VISSIM it closes automatically - don‚Äôt click anything.\n\nYou may now close the OSGeo4W shell.\n\nA few more files were created now:\n\n\n\nAt VISSIM\nOpen the file name.inpx and close the Start Page.\nAt Network Editor panel, click Show entire network:\n\nAs you may note, your network is not exactly in place, when comparing to a basemap. ü•¥\n\nTo adjust this, you may either move the basemap or the network.\nFirst, with the distance tool, measure the distance of one reference point of the network to where it should be placed, in both X and Y directions.\n\nThen Edit ‚ü∂ Move Network\n\nRepeat the process until the network intersection is centred with the intersection in the basemap.\nSave your network file! üéâ\nThis process resulted in the abovementioned file.\nNo go on and adjust the details that require some attention.",
    "crumbs": [
      "Home",
      "Exercises",
      "Micro Case Study"
    ]
  },
  {
    "objectID": "micro.html#footnotes",
    "href": "micro.html#footnotes",
    "title": "Micro Case Study",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThis installation already comes with all the required packages.‚Ü©Ô∏é\nYou may do everything on the cmd (command line prompt terminal), but some errors may be output.‚Ü©Ô∏é",
    "crumbs": [
      "Home",
      "Exercises",
      "Micro Case Study"
    ]
  },
  {
    "objectID": "pois.html",
    "href": "pois.html",
    "title": "POIs",
    "section": "",
    "text": "Different categories, based on B√ºttner et al. (2022) : www.flowersofproximity.com\n\n\n\n\n\n\n\nThe Flowers of Proximity\n\n\nFor the Streets4All project, and SiteSelection package (Rosa F√©lix and Gabriel Valen√ßa 2024), we divided in:\n\nAmenities\nHealthcare\nLeisure\nShop\nSport\nTourism\n\nSee the script we did for all Portugal, and the dataset for Lisbon (2024):\nhttps://github.com/U-Shift/SiteSelection/blob/cced36b055495dc9db6c0c815b410e8f4f5c16ba/code/data_extract.R#L146\nSee other OpenStreetMap categories at their Wiki.\n\n\n\nRandom points from",
    "crumbs": [
      "Home",
      "Exercises",
      "POIs"
    ]
  },
  {
    "objectID": "pois.html#points-of-interest",
    "href": "pois.html#points-of-interest",
    "title": "POIs",
    "section": "",
    "text": "Different categories, based on B√ºttner et al. (2022) : www.flowersofproximity.com\n\n\n\n\n\n\n\nThe Flowers of Proximity\n\n\nFor the Streets4All project, and SiteSelection package (Rosa F√©lix and Gabriel Valen√ßa 2024), we divided in:\n\nAmenities\nHealthcare\nLeisure\nShop\nSport\nTourism\n\nSee the script we did for all Portugal, and the dataset for Lisbon (2024):\nhttps://github.com/U-Shift/SiteSelection/blob/cced36b055495dc9db6c0c815b410e8f4f5c16ba/code/data_extract.R#L146\nSee other OpenStreetMap categories at their Wiki.\n\n\n\nRandom points from",
    "crumbs": [
      "Home",
      "Exercises",
      "POIs"
    ]
  },
  {
    "objectID": "pois.html#grids",
    "href": "pois.html#grids",
    "title": "POIs",
    "section": "Grids",
    "text": "Grids\n\n\n\n\n\nYou can also use the universal h3 hexagon grid",
    "crumbs": [
      "Home",
      "Exercises",
      "POIs"
    ]
  },
  {
    "objectID": "rr5r.html",
    "href": "rr5r.html",
    "title": "R, RStudio and r5r",
    "section": "",
    "text": "In this chapter we will guide you through the installation of R, RStudio and the packages you will need for this course, for the macro network models.\nR and RStudio1 are separate downloads.\n\n\nYou will need R installed on your computer. R stats (how it is also known) is a programming language and free software environment for statistical computing and graphics supported by the R Foundation for Statistical Computing.\nThe download links live at The Comprehensive R Archive Network (aka CRAN). The most recent version is 4.5.1, but you can use &gt;= 4.1.x if you already have it installed.\n\nWindowsMacUbuntu\n\n\nDownload R-4.5.1 for Windows and run the executable file.\n\n\n\n\n\n\nImportant\n\n\n\nYou will also need to install Rtools, which is a collection of tools necessary to build R packages in Windows.\n\n\n\n\nDownload R-4.5.1 for MacOX. You will have to choose between the arm64 or the x86-64 version.\nDownload the .pkg file and install it as usual.\n\n\n\nThese are instructions for Ubuntu. If you use other linux distribution, please follow the instructions on The Comprehensive R Archive Network - CRAN.\n\nYou can look for R in the Ubuntu Software Center or install it via the terminal:\n\n# sudo apt update && sudo apt upgrade -y\nsudo apt install r-base\n\nOr, if you prefer, you can install the latest version of R from CRAN:\n\n# update indices\nsudo apt update -qq\n# install two helper packages we need\nsudo apt install --no-install-recommends software-properties-common dirmngr\n# add the signing key (by Michael Rutter) for these repos\nwget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc\n# add the R 4.0 repo from CRAN -- adjust 'focal' to 'groovy' or 'bionic' as needed\nsudo add-apt-repository \"deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/\"\n\nThen run:\n\nsudo apt install r-base r-base-core r-recommended r-base-dev\n\n[Optional] To keep up-to-date r version and packages, you can follow the instructions at r2u\n\n\n\nAfter this installation, you don‚Äôt need to open R base. Please proceed to install RStudio.\n\n\n\nRStudio Desktop is an integrated development environment (IDE) for R. It includes a console, syntax-highlighting editor that supports direct code execution, as well as tools for plotting, history, debugging and workspace management.\nRStudio is available for free download from Posit RStudio.\n\nWindows 10/11MacOSUbuntu\n\n\nDownload RStudio 2025.09 and run the executable file.\n\n\nDownload RStudio 2025.09 and install it as usual.\n\n\n\nThese are instructions for Ubuntu 24. If you use other linux distribution, please follow the instructions on Posit RStudio.\n\nInstall it via the terminal:\n\nsudo apt install libssl-dev libclang-dev\nwget https://download1.rstudio.org/electron/jammy/amd64/rstudio-2025.09.0-387-amd64.deb\nsudo dpkg -i rstudio*\nrm -v rstudio*\n\n\n\n\n\n\n\nYou will need to install some packages to work with the data and scripts in this course.\nYou can install them in RStudio by searching for them in the Packages tab:\n\nor by running the following code in the console:\n\ninstall.packages(\"tidyverse\")\n\ninstall.packages(\"sf\")\ninstall.packages(\"mapview\")\ninstall.packages(\"osmextract\")\ninstall.packages(\"stplanr\")\n\ninstall.packages(c(\"remotes\", \"devtools\", \"usethis\")) # optional\n\n\n\n\nThe simplest way to install r5r is by running the code below on RStudio Console. This might take a few minutes if this is the first time you install these packages.\n\npkgs = c(\"r5r\", \"accessibility\", \"rJavaEnv\", \"h3jsr\", \"quantreg\")\n\ninstall.packages(pkgs)\n\n# dev version with latest features - optional\nutils::remove.packages('r5r')\ndevtools::install_github(\"ipeaGIT/r5r\", subdir = \"r-package\")\n\n\n\nTo use the {r5r} package (version v2.0 or higher), you will need to have Java Development Kit (JDK) 21 installed on your computer. There are numerous open-source JDK implementations. The easiest way to install JDK is using the new {rJavaEnv} package in R.\n\n# check version of Java currently installed (if any) \nrJavaEnv::java_check_version_rjava()\n\n## if this is the first time you use {rJavaEnv}, you might need to run this code\n## below to consent the installation of Java.\n# rJavaEnv::rje_consent(provided = TRUE)\n\n# install Java 21\nrJavaEnv::java_quick_install(version = 21)\n\n# check if Java was successfully installed\nrJavaEnv::java_check_version_rjava()\n\nAlternatively, you can manually download and install JDK 21.\n\nWindows and MacOSUbuntu\n\n\nGo to Java Development Kit 21, download the latest 21 build corresponding to your operating system and run the executable file.\n\n\nInstall it via the terminal:\n\nsudo apt install -y openjdk-21-jdk openjdk-21-jre\njava -version",
    "crumbs": [
      "Home",
      "Software",
      "R & r5r"
    ]
  },
  {
    "objectID": "rr5r.html#r",
    "href": "rr5r.html#r",
    "title": "R, RStudio and r5r",
    "section": "",
    "text": "You will need R installed on your computer. R stats (how it is also known) is a programming language and free software environment for statistical computing and graphics supported by the R Foundation for Statistical Computing.\nThe download links live at The Comprehensive R Archive Network (aka CRAN). The most recent version is 4.5.1, but you can use &gt;= 4.1.x if you already have it installed.\n\nWindowsMacUbuntu\n\n\nDownload R-4.5.1 for Windows and run the executable file.\n\n\n\n\n\n\nImportant\n\n\n\nYou will also need to install Rtools, which is a collection of tools necessary to build R packages in Windows.\n\n\n\n\nDownload R-4.5.1 for MacOX. You will have to choose between the arm64 or the x86-64 version.\nDownload the .pkg file and install it as usual.\n\n\n\nThese are instructions for Ubuntu. If you use other linux distribution, please follow the instructions on The Comprehensive R Archive Network - CRAN.\n\nYou can look for R in the Ubuntu Software Center or install it via the terminal:\n\n# sudo apt update && sudo apt upgrade -y\nsudo apt install r-base\n\nOr, if you prefer, you can install the latest version of R from CRAN:\n\n# update indices\nsudo apt update -qq\n# install two helper packages we need\nsudo apt install --no-install-recommends software-properties-common dirmngr\n# add the signing key (by Michael Rutter) for these repos\nwget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc\n# add the R 4.0 repo from CRAN -- adjust 'focal' to 'groovy' or 'bionic' as needed\nsudo add-apt-repository \"deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/\"\n\nThen run:\n\nsudo apt install r-base r-base-core r-recommended r-base-dev\n\n[Optional] To keep up-to-date r version and packages, you can follow the instructions at r2u\n\n\n\nAfter this installation, you don‚Äôt need to open R base. Please proceed to install RStudio.",
    "crumbs": [
      "Home",
      "Software",
      "R & r5r"
    ]
  },
  {
    "objectID": "rr5r.html#rstudio",
    "href": "rr5r.html#rstudio",
    "title": "R, RStudio and r5r",
    "section": "",
    "text": "RStudio Desktop is an integrated development environment (IDE) for R. It includes a console, syntax-highlighting editor that supports direct code execution, as well as tools for plotting, history, debugging and workspace management.\nRStudio is available for free download from Posit RStudio.\n\nWindows 10/11MacOSUbuntu\n\n\nDownload RStudio 2025.09 and run the executable file.\n\n\nDownload RStudio 2025.09 and install it as usual.\n\n\n\nThese are instructions for Ubuntu 24. If you use other linux distribution, please follow the instructions on Posit RStudio.\n\nInstall it via the terminal:\n\nsudo apt install libssl-dev libclang-dev\nwget https://download1.rstudio.org/electron/jammy/amd64/rstudio-2025.09.0-387-amd64.deb\nsudo dpkg -i rstudio*\nrm -v rstudio*",
    "crumbs": [
      "Home",
      "Software",
      "R & r5r"
    ]
  },
  {
    "objectID": "rr5r.html#r-packages",
    "href": "rr5r.html#r-packages",
    "title": "R, RStudio and r5r",
    "section": "",
    "text": "You will need to install some packages to work with the data and scripts in this course.\nYou can install them in RStudio by searching for them in the Packages tab:\n\nor by running the following code in the console:\n\ninstall.packages(\"tidyverse\")\n\ninstall.packages(\"sf\")\ninstall.packages(\"mapview\")\ninstall.packages(\"osmextract\")\ninstall.packages(\"stplanr\")\n\ninstall.packages(c(\"remotes\", \"devtools\", \"usethis\")) # optional",
    "crumbs": [
      "Home",
      "Software",
      "R & r5r"
    ]
  },
  {
    "objectID": "rr5r.html#r5r",
    "href": "rr5r.html#r5r",
    "title": "R, RStudio and r5r",
    "section": "",
    "text": "The simplest way to install r5r is by running the code below on RStudio Console. This might take a few minutes if this is the first time you install these packages.\n\npkgs = c(\"r5r\", \"accessibility\", \"rJavaEnv\", \"h3jsr\", \"quantreg\")\n\ninstall.packages(pkgs)\n\n# dev version with latest features - optional\nutils::remove.packages('r5r')\ndevtools::install_github(\"ipeaGIT/r5r\", subdir = \"r-package\")\n\n\n\nTo use the {r5r} package (version v2.0 or higher), you will need to have Java Development Kit (JDK) 21 installed on your computer. There are numerous open-source JDK implementations. The easiest way to install JDK is using the new {rJavaEnv} package in R.\n\n# check version of Java currently installed (if any) \nrJavaEnv::java_check_version_rjava()\n\n## if this is the first time you use {rJavaEnv}, you might need to run this code\n## below to consent the installation of Java.\n# rJavaEnv::rje_consent(provided = TRUE)\n\n# install Java 21\nrJavaEnv::java_quick_install(version = 21)\n\n# check if Java was successfully installed\nrJavaEnv::java_check_version_rjava()\n\nAlternatively, you can manually download and install JDK 21.\n\nWindows and MacOSUbuntu\n\n\nGo to Java Development Kit 21, download the latest 21 build corresponding to your operating system and run the executable file.\n\n\nInstall it via the terminal:\n\nsudo apt install -y openjdk-21-jdk openjdk-21-jre\njava -version",
    "crumbs": [
      "Home",
      "Software",
      "R & r5r"
    ]
  },
  {
    "objectID": "rr5r.html#footnotes",
    "href": "rr5r.html#footnotes",
    "title": "R, RStudio and r5r",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nWe will use RStudio, although if you already use other studio such as VScode, that‚Äôs also fine.‚Ü©Ô∏é",
    "crumbs": [
      "Home",
      "Software",
      "R & r5r"
    ]
  },
  {
    "objectID": "software.html",
    "href": "software.html",
    "title": "Software",
    "section": "",
    "text": "There are several software options for modeling transportation systems.\nTo choose a traffic simulation software to work with can depend on different things to consider. You may use more than one software, depending on the scale you are working with, and on other characteristics.",
    "crumbs": [
      "Home",
      "Software"
    ]
  },
  {
    "objectID": "software.html#macro-vs.-micro",
    "href": "software.html#macro-vs.-micro",
    "title": "Software",
    "section": "Macro vs.¬†Micro",
    "text": "Macro vs.¬†Micro\n\nMacro simulators\nSome softwares can be more appropriated if using a large scale, such as regional or city-wide area. For instance, the traffic impacts on the development of a new centrality (hospital, airport), or in the introduction of a new bridge or freeway can be simulated with macro simulator software.\nPTV Visum, Aimsun, r5r, and MatSim are examples of software to deal with a large scale simulation.\nFor macro simulations it is essential do consider zoning, flows, etc.\nUsually this type of simulators can smoothly integrate Public Transport information, such as GTFS files.\n\n\nMicro simulators\nWant to simulate changes at a street or neighbourhood level? Then micro simulator software should be used.\nPTV Visim, SUMO, and A/B Street are examples of software to deal with a micro scale simulation.",
    "crumbs": [
      "Home",
      "Software"
    ]
  },
  {
    "objectID": "software.html#paid-licence-vs.-free",
    "href": "software.html#paid-licence-vs.-free",
    "title": "Software",
    "section": "Paid (Licence) vs.¬†Free",
    "text": "Paid (Licence) vs.¬†Free\n\nPaid\nAvailable commercial software is largely used at many companies and consultants. Universities also usually offer licence access to students and researchers. At IST we provide access to PTV Visum licence for registered students1.\nSome groups provide a student version, which typically does not include all the features.\nPTV Vissim and Visum, and Aimsum are examples of commercial simulation software.\n\n\nFree\nFree and open source software is getting more robust, and should not be overlooked.\nMatSim, r5r, and SUMO are examples of free and open source simulation software.",
    "crumbs": [
      "Home",
      "Software"
    ]
  },
  {
    "objectID": "software.html#operating-system",
    "href": "software.html#operating-system",
    "title": "Software",
    "section": "Operating System",
    "text": "Operating System\nTo choose a software to work with, you should also consider the operation system of your personal computer (Windows, MacOS, Linux based).\nPTV Visum and Visim are only available for Windows.\nYou may always use virtual machines to have another OS in your PC, but that comes with memory and performance cost.\n\nFor MacOS users, UTM is a good free option. Keep in mind that the University of Lisbon provides Windows stutent‚Äôs licences.\nFor Linux (Ubuntu or Debian) users, Gnome Boxes are an interesting option to run Windows.\nFor Windows users, you should have no problem using any software.",
    "crumbs": [
      "Home",
      "Software"
    ]
  },
  {
    "objectID": "software.html#instalation-and-usage",
    "href": "software.html#instalation-and-usage",
    "title": "Software",
    "section": "Instalation and Usage",
    "text": "Instalation and Usage\nWe only offer guidance to setup some of the available software2.\nPlease see each software page for more details.",
    "crumbs": [
      "Home",
      "Software"
    ]
  },
  {
    "objectID": "software.html#footnotes",
    "href": "software.html#footnotes",
    "title": "Software",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nContact Filipe Moura or Rosa F√©lix to access Visum.‚Ü©Ô∏é\nIf you use other traffic simulation software, you may contribute to this website and create another tutorial üôÇ. Fork and Pull Request in this Github repo.‚Ü©Ô∏é",
    "crumbs": [
      "Home",
      "Software"
    ]
  },
  {
    "objectID": "vissim.html",
    "href": "vissim.html",
    "title": "Vissim",
    "section": "",
    "text": "This tutorial is only for Windows\n\n\n\nIf you do not use Windows, you need to have a Virtual Machine. If you have an Arm processor this won‚Äôt work, even with a VM.\nIn this tutorial we will guide you to install and start using Vissim.\nPTV Vissim is a micro simulation software, non-free, available only for Windows OS.",
    "crumbs": [
      "Home",
      "Software",
      "VISSIM"
    ]
  },
  {
    "objectID": "vissim.html#vissim-install",
    "href": "vissim.html#vissim-install",
    "title": "Vissim",
    "section": "Installation",
    "text": "Installation\nPTV Vissim is available to download at: https://cgi.ptvgroup.com/visionSetups/en/filter;product=PTV%20Vissim\n\nChoose the most recent version (recommended) ‚â§ 2024. The file may be more than 1.3 GB.\nIf you don‚Äôt have Python installed already in your PC, don‚Äôt worry, you can opt to install it along the Vissim setup.\nThe available instructions are very straight forward.\n\nLicence activation\n\nYou should have received a server address of where the CERIS licence lives. If not, contact the course teacher.\n\nTo use Vissim with the CERIS licence, you need to download PTV Licence Manager (Standard).\n\nIt will ask you to download also another tiny software CodeMeter Runtime. Say yes!\nAfter install it, open PTV Licence Manager, and click on ‚öôÔ∏è Edit CodeMeter settings:\n\nAdd ‚ûï CodeMeter server, and insert the server address that was sent to you.\n\nPress close (go back) and now üîç Find Licences.\n\nAn available licence row should now appear on the list üéâ. Close it.",
    "crumbs": [
      "Home",
      "Software",
      "VISSIM"
    ]
  },
  {
    "objectID": "vissim.html#getting-started",
    "href": "vissim.html#getting-started",
    "title": "Vissim",
    "section": "Getting started",
    "text": "Getting started\nWhen launching Vissim for the first time, you should have something like this. This is a good signal, it means that the connection to the licence server is running smoothly and that you are ready to start working on your projects! üöÄ\n\nThe ‚ÄúTutorial First Steps‚Äù may be wise to follow if you are not familiar with the software. It covers the following topics:\n\nDeveloping the network\nRun Simulation\nSignal control\n\nPTV also offers online tutorials to get familiar with the software.",
    "crumbs": [
      "Home",
      "Software",
      "VISSIM"
    ]
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "To learn more about Quarto websites visit https://quarto.org/docs/websites."
  },
  {
    "objectID": "casestudy.html",
    "href": "casestudy.html",
    "title": "Macro Case Study",
    "section": "",
    "text": "Please download the VISUM project file (.ver) with the base data that you will need.\n\n\nWe are using a road network exported from OpenStreetMap.\nWe already imported that network to this project as follows:\n\nSelect only Urban Road Network (to keep the principal roads)\n\n\nThis is what it looks like when importing from OSM.\n\n\n\n\nStart by these ones (General, and links not connected to the network)\n\nignore warnings\nSet to active the ones you want to have a look. They are now active/selected. Delete if needed (DEL button)\n\n\n\n\n\nThese are the zones to consider in the area.\nThey are from census 2021 sections, and aggregated in larger TAZ.\n\nThis is how it looks like after importing the shapefile of zones to the project.\n\n\n\nWith zones from census 21 (aggregation of sub-sections)\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe already added the external zones (rest of the world) and the associated connectors to the road network.\n\n\n\n\n\n\nCreate an OD matrix\n\n\n\n\n\n\nGive it a proper name.\nAnd copy-paste data from excel\n\nNow you have your OD matrix with data for your HA Group",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#road-network",
    "href": "casestudy.html#road-network",
    "title": "Macro Case Study",
    "section": "",
    "text": "We are using a road network exported from OpenStreetMap.\nWe already imported that network to this project as follows:\n\nSelect only Urban Road Network (to keep the principal roads)\n\n\nThis is what it looks like when importing from OSM.\n\n\n\n\nStart by these ones (General, and links not connected to the network)\n\nignore warnings\nSet to active the ones you want to have a look. They are now active/selected. Delete if needed (DEL button)",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#zones",
    "href": "casestudy.html#zones",
    "title": "Macro Case Study",
    "section": "",
    "text": "These are the zones to consider in the area.\nThey are from census 2021 sections, and aggregated in larger TAZ.\n\nThis is how it looks like after importing the shapefile of zones to the project.\n\n\n\nWith zones from census 21 (aggregation of sub-sections)\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe already added the external zones (rest of the world) and the associated connectors to the road network.",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#od-matrix",
    "href": "casestudy.html#od-matrix",
    "title": "Macro Case Study",
    "section": "",
    "text": "Create an OD matrix\n\n\n\n\n\n\nGive it a proper name.\nAnd copy-paste data from excel\n\nNow you have your OD matrix with data for your HA Group",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#create-a-link",
    "href": "casestudy.html#create-a-link",
    "title": "Macro Case Study",
    "section": "Create a link",
    "text": "Create a link\n\nI will first check the characteristics of the previous link that I‚Äôm connecting to, by double-click the link in the editor, and see the details. The Quick View panel also shows some of its information.\n\nThis is a Type no 50.\nCreate a link by connecting both nodes.\n\nWhen creating a link, a window will popup to define some of the link parameters. In this case I will also make it a type 50 link.\n\n\nClicking 2 times in the new link, you can change some of the parameters. It will highlight the ones that are not mirrored to the opposite direction - you should also transfer the new modifications.\n\nTo make realistic links, activate background map before proceeding.\n\nVerify if the link is well connected with Check network integrity, or estimating a shortest path between zones (with connectors).",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#shortest-path",
    "href": "casestudy.html#shortest-path",
    "title": "Macro Case Study",
    "section": "Shortest path",
    "text": "Shortest path\n\nClick on 2 zones and run.\n\nSee the opposite direction\n\nReset for a new one.",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#flow-bundle",
    "href": "casestudy.html#flow-bundle",
    "title": "Macro Case Study",
    "section": "Flow Bundle",
    "text": "Flow Bundle\nThe Flow Bundle function can be useful for quantifying the traffic volume in a single link, broken down by the origins/destinations which have the most weight in that link.\nGraphics ‚ü∂ Flow Bundle ‚ü∂ choose the link ‚ü∂ Play ‚ü∂ go to matrices and see the new Formula Matrices/ Flow Bundle ‚ü∂ list view ‚ü∂ sort by volume.",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#selection-mode",
    "href": "casestudy.html#selection-mode",
    "title": "Macro Case Study",
    "section": "Selection Mode",
    "text": "Selection Mode",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#labels",
    "href": "casestudy.html#labels",
    "title": "Macro Case Study",
    "section": "Labels",
    "text": "Labels\nChange the zone label to name:\n\n\n\n\n\n\nThe same if you want to remove the symbol representation of links\n\nYou can save these visualization as a Graphic parameter file, so you can shift between one or more, depending on the assessment you are doing.",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  },
  {
    "objectID": "casestudy.html#footnotes",
    "href": "casestudy.html#footnotes",
    "title": "Macro Case Study",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nPrivate Transport‚Ü©Ô∏é",
    "crumbs": [
      "Home",
      "Exercises",
      "Macro Case Study"
    ]
  }
]